From 54f775dfc516115c4d654d250189f431a82d1d42 Mon Sep 17 00:00:00 2001
From: Denis Oliver Kropp <dok@directfb.org>
Date: Sun, 27 May 2012 11:40:31 +0200
Subject: [PATCH] libdirect: Use ARM assembler for atomic operations only if
 ARCH_ARMv7 is defined.

Upstream-Status: backport from 1.6.0-pre1
---
 lib/direct/atomic.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/direct/atomic.h b/lib/direct/atomic.h
index fe7664f..74d8d18 100644
--- a/lib/direct/atomic.h
+++ b/lib/direct/atomic.h
@@ -183,7 +183,7 @@
 #endif
 
 
-#if defined(ARCH_ARM) && !defined(ARCH_IWMMXT)
+#if defined(ARCH_ARMv7) && !defined(ARCH_IWMMXT)
 
 static inline int _D__atomic_cmpxchg(volatile int *ptr, int old, int _new)
 {
-- 
1.7.9.5

